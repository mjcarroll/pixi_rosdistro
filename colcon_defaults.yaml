build:
  merge-install: true
  executor: sequential
  # Tier 3: first C++ packages up to rcutils
  # Expand incrementally as more system deps are verified.
  packages-up-to:
    - rcutils
  cmake-args:
    - -GNinja
    - --no-warn-unused-cli
    - -DCMAKE_BUILD_TYPE=Release
    - -DCMAKE_BUILD_WITH_INSTALL_RPATH:bool=TRUE
    # Avoid BFD linker issues in conda environments
    - -DSTACK_DETAILS_AUTO_DETECT:bool=FALSE
    - -DSTACK_DETAILS_BFD:bool=FALSE
  event-handlers:
    - console_direct+
    - console_package_list+

test:
  merge-install: true
  event-handlers:
    - console_direct+
